import{r as I,i as E,c as i,u as _,a as H,b as Y,d as J,e as M,f as Q,p as U,l as W,n as X,k as h,g as N,h as V,j as B,m as p,w as ee,o as T,q as te,v as ne,T as oe,s as le,t as se,x as y,y as ae,z as P,A as $,B as b,C as w,D as j,E as re,F as ce,_ as ie,G as ue,H as de,I as ve}from"./index-aa6ee902.js";const fe=["","default","small","large"],S=I(0),O=2e3,Z=Symbol("zIndexContextKey"),F=n=>{const e=n||E(Z,void 0),t=i(()=>{const l=_(e);return H(l)?l:O}),o=i(()=>t.value+S.value);return{initialZIndex:t,currentZIndex:o,nextZIndex:()=>(S.value++,o.value)}};Y({type:String,values:fe,required:!1});const me=Symbol("size"),K=Symbol(),C=I();function R(n,e=void 0){const t=N()?E(K,C):C;return n?i(()=>{var o,s;return(s=(o=t.value)==null?void 0:o[n])!=null?s:e}):t}function ge(n,e){const t=R(),o=J(n,i(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||M})),s=Q(i(()=>{var a;return(a=t.value)==null?void 0:a.locale})),l=F(i(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||O})),c=i(()=>{var a;return _(e)||((a=t.value)==null?void 0:a.size)||""});return pe(i(()=>_(t)||{})),{ns:o,locale:s,zIndex:l,size:c}}const pe=(n,e,t=!1)=>{var o;const s=!!N(),l=s?R():void 0,c=(o=e==null?void 0:e.provide)!=null?o:s?U:void 0;if(!c)return;const a=i(()=>{const v=_(n);return l!=null&&l.value?be(l.value,v):v});return c(K,a),c(W,i(()=>a.value.locale)),c(X,i(()=>a.value.namespace)),c(Z,i(()=>a.value.zIndex)),c(me,{size:i(()=>a.value.size||"")}),(t||!C.value)&&(C.value=a.value),a},be=(n,e)=>{var t;const o=[...new Set([...h(n),...h(e)])],s={};for(const l of o)s[l]=(t=e[l])!=null?t:n[l];return s};function xe(n){let e;const t=I(!1),o=V({...n,originalPosition:"",originalOverflow:"",visible:!1});function s(r){o.text=r}function l(){const r=o.parent,u=m.ns;if(!r.vLoadingAddClassList){let d=r.getAttribute("loading-number");d=Number.parseInt(d)-1,d?r.setAttribute("loading-number",d.toString()):(y(r,u.bm("parent","relative")),r.removeAttribute("loading-number")),y(r,u.bm("parent","hidden"))}c(),g.unmount()}function c(){var r,u;(u=(r=m.$el)==null?void 0:r.parentNode)==null||u.removeChild(m.$el)}function a(){var r;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(v,400),o.visible=!1,(r=n.closed)==null||r.call(n))}function v(){if(!t.value)return;const r=o.parent;t.value=!1,r.vLoadingAddClassList=void 0,l()}const f=B({name:"ElLoading",setup(r,{expose:u}){const{ns:d}=ge("loading"),G=F();return u({ns:d,zIndex:G}),()=>{const k=o.spinner||o.svg,q=p("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",...k?{innerHTML:k}:{}},[p("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),D=o.text?p("p",{class:d.b("text")},[o.text]):void 0;return p(oe,{name:d.b("fade"),onAfterLeave:v},{default:ee(()=>[T(te("div",{style:{backgroundColor:o.background||""},class:[d.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[p("div",{class:d.b("spinner")},[q,D])]),[[ne,o.visible]])])})}}}),g=le(f),m=g.mount(document.createElement("div"));return{...se(o),setText:s,removeElLoadingChild:c,close:a,handleAfterLeave:v,vm:m,get $el(){return m.$el}}}let x;const _e=function(n={}){if(!ae)return;const e=ye(n);if(e.fullscreen&&x)return x;const t=xe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(x=void 0)}});Ce(e,e.parent,t),z(e,e.parent,t),e.parent.vLoadingAddClassList=()=>z(e,e.parent,t);let o=e.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",e.parent.setAttribute("loading-number",o),e.parent.appendChild(t.$el),P(()=>t.visible.value=e.visible),e.fullscreen&&(x=t),t},ye=n=>{var e,t,o,s;let l;return $(n.target)?l=(e=document.querySelector(n.target))!=null?e:document.body:l=n.target||document.body,{parent:l===document.body||n.body?document.body:l,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:l===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(o=n.lock)!=null?o:!1,customClass:n.customClass||"",visible:(s=n.visible)!=null?s:!0,target:l}},Ce=async(n,e,t)=>{const{nextZIndex:o}=t.vm.zIndex,s={};if(n.fullscreen)t.originalPosition.value=b(document.body,"position"),t.originalOverflow.value=b(document.body,"overflow"),s.zIndex=o();else if(n.parent===document.body){t.originalPosition.value=b(document.body,"position"),await P();for(const l of["top","left"]){const c=l==="top"?"scrollTop":"scrollLeft";s[l]=`${n.target.getBoundingClientRect()[l]+document.body[c]+document.documentElement[c]-Number.parseInt(b(document.body,`margin-${l}`),10)}px`}for(const l of["height","width"])s[l]=`${n.target.getBoundingClientRect()[l]}px`}else t.originalPosition.value=b(e,"position");for(const[l,c]of Object.entries(s))t.$el.style[l]=c},z=(n,e,t)=>{const o=t.vm.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?y(e,o.bm("parent","relative")):w(e,o.bm("parent","relative")),n.fullscreen&&n.lock?w(e,o.bm("parent","hidden")):y(e,o.bm("parent","hidden"))},L=Symbol("ElLoading"),A=(n,e)=>{var t,o,s,l;const c=e.instance,a=r=>j(e.value)?e.value[r]:void 0,v=r=>{const u=$(r)&&(c==null?void 0:c[r])||r;return u&&I(u)},f=r=>v(a(r)||n.getAttribute(`element-loading-${ce(r)}`)),g=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,m={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:g,target:(o=a("target"))!=null?o:g?void 0:n,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(l=a("lock"))!=null?l:e.modifiers.lock};n[L]={options:m,instance:_e(m)}},Ie=(n,e)=>{for(const t of Object.keys(e))re(e[t])&&(e[t].value=n[t])},Le={mounted(n,e){e.value&&A(n,e)},updated(n,e){const t=n[L];e.oldValue!==e.value&&(e.value&&!e.oldValue?A(n,e):e.value&&e.oldValue?j(e.value)&&Ie(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[L])==null||e.instance.close()}};async function ke(){const{createFFmpeg:n}=await ie(()=>import("./index-949c89c3.js").then(t=>t.i),[]);return n({log:!0,progress:t=>{console.log(t)}})}const he=["element-loading-text"],we=B({__name:"Video",setup(n){const e=V({value:!1,text:"Loading"});async function t(){e.value=!0,e.text="初始化编解码器中...",await ke(),e.value=!1}return t(),(o,s)=>{const l=Le;return T((ue(),de("div",{class:"video","element-loading-text":e.text},null,8,he)),[[l,e.value]])}}});const ze=ve(we,[["__scopeId","data-v-a8c6c2c3"]]);export{ze as default};
