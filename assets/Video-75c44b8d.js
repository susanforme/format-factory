import{f as U,a as z,i as P,b as $,p as D,_ as G}from"./index-2bcba0bb.js";import{d as T,r as k,o as y,e as E,f as n,j as e,k as c,F as M,g as j,v as A,G as H,H as J,I as L,J as N,K as B,L as K,a as I,c as R,w as q,M as Q,t as S,u as F,N as W,O as X,y as Y,z as Z,P as ee}from"./element-plus-ef65c4b8.js";const oe={class:"config"},te=n("h2",null,"转换配置:",-1),ne={class:"operate"},le=T({__name:"Transcoding",props:{onFinish:{type:Function}},setup(d){const o=d,_=["mp4","webm","ogg","avi","mov","flv","wmv","mkv","m4v","3gp","3g2","ts","mts","m2ts","vob","mxf","rm","rmvb","f4v"],l=k({format:"mp4",kbps:1e3});function u(){o.onFinish(l)}return(s,a)=>{const b=H,r=J,m=L,g=N,h=B,i=K;return y(),E("div",null,[n("div",oe,[te,e(h,{"label-position":"left","label-width":"100px",model:l},{default:c(()=>[e(m,{label:"输出格式"},{default:c(()=>[e(r,{filterable:"",modelValue:l.format,"onUpdate:modelValue":a[0]||(a[0]=t=>l.format=t),placeholder:"请选择"},{default:c(()=>[(y(),E(M,null,j(_,t=>e(b,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"码率"},{default:c(()=>[e(g,{placeholder:"请输入",modelValue:l.kbps,"onUpdate:modelValue":a[1]||(a[1]=t=>l.kbps=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),n("div",ne,[e(i,{type:"primary",onClick:u},{default:c(()=>[A(" 输出 ")]),_:1})])])}}}),v=d=>(Y("data-v-6076fbf5"),d=d(),Z(),d),ae=["element-loading-text"],se={class:"info"},ie=v(()=>n("h2",null,"视频信息:",-1)),ce={class:"row"},de=v(()=>n("div",{class:"label"},"文件名:",-1)),_e={class:"value"},ue={class:"row"},re=v(()=>n("div",{class:"label"},"文件大小:",-1)),me={class:"value"},pe={class:"config"},fe=v(()=>n("h2",null,"通用导出配置:",-1)),ve={class:"operate"},be=T({__name:"Video",setup(d){let o=null,_="";const l=k({name:"output"}),u=I("transcoding");I({});const s=k({value:!1,text:"Loading"}),a=R(()=>z.value[0]);async function b(){s.value=!0,s.text="初始化编解码器中...",o=await P(),s.value=!1}q(a,async()=>{a.value&&(_&&(o==null||o.FS("unlink",_)),await r())});async function r(){s.value=!0,s.text="获取视频信息中...";const i=a.value,t=await $(i.raw),p=[];o==null||o.FS("writeFile",i.name,t),_=i.name,o==null||o.setLogger(({type:w,message:V})=>{w!=="ffout"&&p.push(V)}),await(o==null?void 0:o.run("-i",i.name)),console.log(D(p)),s.value=!1}async function m(){console.log("初始化编码器"),await b(),await r()}m();function g(){}function h(i){console.log("%c [ config ]-70","font-size:13px; background:pink; color:#bf2c9f;",i)}return(i,t)=>{const p=N,w=L,V=B,f=ee,C=W,O=X;return Q((y(),E("div",{class:"video","element-loading-text":s.text},[n("div",se,[ie,n("div",ce,[de,n("div",_e,S(F(a).name),1)]),n("div",ue,[re,n("div",me,S(F(U)(F(a).size)),1)])]),n("div",pe,[fe,e(V,{"label-position":"left","label-width":"100px",model:l},{default:c(()=>[e(w,{label:"输出名称"},{default:c(()=>[e(p,{placeholder:"请输入",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=x=>l.name=x)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),n("div",ve,[e(C,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=x=>u.value=x),onTabClick:g},{default:c(()=>[e(f,{name:"transcoding",label:"转换"},{default:c(()=>[e(le,{"on-finish":h})]),_:1}),e(f,{name:"Config",label:"提取字幕"}),e(f,{name:"Role",label:"提取音频"}),e(f,{name:"waterMark",label:"水印"})]),_:1},8,["modelValue"])])],8,ae)),[[O,s.value]])}}});const we=G(be,[["__scopeId","data-v-6076fbf5"]]);export{we as default};
