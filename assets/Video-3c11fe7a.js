import{f as O,a as $,g as L,_ as U}from"./index-9d4bb722.js";import{k as C,c as x,l as f,v as N,q as s,u as T,S as R,f as e,U as A,j as F,m as I,z as n,F as M,t as P,x as j,V as G,W as k,X as w,Y as E,Z as q,_ as H,r as S,w as J,$ as W,a0 as X,a1 as Y,I as Z,J as K,a2 as Q}from"./element-plus-a56b43fc.js";const ee=C({__name:"InfoTable",props:{data:null},setup(i){const d=i,m=x(()=>Object.entries(d.data).map(([o,u])=>({label:o,value:u})));return(o,u)=>{const c=A,l=R;return f(),N(l,{data:T(m),style:{width:"100%"}},{default:s(()=>[e(c,{prop:"label"}),e(c,{prop:"value"})]),_:1},8,["data"])}}});const oe={class:"config"},te=n("h2",null,"转换配置:",-1),ae={class:"operate"},le=C({__name:"Transcoding",props:{onFinish:{type:Function}},setup(i){const d=i,m=["mp4","webm","ogg","avi","mov","flv","wmv","mkv","m4v","3gp","3g2","ts","mts","m2ts","vob","mxf","rm","rmvb","f4v"],o=F({format:"mp4",kbps:1e3});function u(){d.onFinish(o)}return(c,l)=>{const b=H,g=G,r=k,h=w,_=E,t=q;return f(),I("div",null,[n("div",oe,[te,e(_,{"label-position":"left","label-width":"100px",model:o},{default:s(()=>[e(r,{label:"输出格式"},{default:s(()=>[e(g,{filterable:"",modelValue:o.format,"onUpdate:modelValue":l[0]||(l[0]=a=>o.format=a),placeholder:"请选择"},{default:s(()=>[(f(),I(M,null,P(m,a=>e(b,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"码率"},{default:s(()=>[e(h,{placeholder:"请输入",modelValue:o.kbps,"onUpdate:modelValue":l[1]||(l[1]=a=>o.kbps=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),n("div",ae,[e(t,{type:"primary",onClick:u},{default:s(()=>[j(" 输出 ")]),_:1})])])}}}),v=i=>(Z("data-v-2a42f4ec"),i=i(),K(),i),ne=["element-loading-text"],se={class:"info"},ce=v(()=>n("h2",null,"基本信息:",-1)),ie=v(()=>n("div",{class:"info"},[n("h2",null,"视频流信息:")],-1)),de=v(()=>n("div",{class:"info"},[n("h2",null,"音频流信息:")],-1)),_e={class:"config"},me=v(()=>n("h2",null,"通用导出配置:",-1)),ue={class:"operate"},re=C({__name:"Video",setup(i){const d=F({name:"output"}),m=S("transcoding"),o=S({audio:{},video:{code:"",format:""},basic:{VideoCount:"",AudioCount:"",Format:"",Format_Profile:"",CodecID:"",CodecID_Compatible:"",FileSize:"",Duration:"",OverallBitRate_Mode:"",OverallBitRate:"",FrameRate:"",FrameCount:"",StreamSize:"",HeaderSize:"",DataSize:"",FooterSize:"",IsStreamable:"",Encoded_Application:""}}),u=x(()=>({file_n:l.value.name,file_s:O(l.value.size),...o.value.basic})),c=F({value:!1,text:"Loading"}),l=x(()=>$.value[0]);J(l,()=>{l.value&&b()},{immediate:!0});async function b(){c.value=!0,c.text="获取视频信息中...";const _=await L(l.value.raw);console.log("%c [ result ]-68","font-size:13px; background:pink; color:#bf2c9f;",_),_.media.track.forEach(t=>{const a=t["@type"];a==="Video"?o.value.video={code:t.CodecID,format:t.Format}:a==="Audio"?o.value.audio={code:t.CodecID,format:t.Format}:a==="General"&&(o.value.basic=t)}),c.value=!1}async function g(){console.log(123)}g();function r(){console.log(123)}function h(_){console.log("%c [ config ]-70","font-size:13px; background:pink; color:#bf2c9f;",_)}return(_,t)=>{const a=w,y=k,z=E,p=Q,D=X,B=Y;return W((f(),I("div",{class:"video","element-loading-text":c.text},[n("div",se,[ce,e(ee,{data:T(u)},null,8,["data"])]),ie,de,n("div",_e,[me,e(z,{"label-position":"left","label-width":"100px",model:d},{default:s(()=>[e(y,{label:"输出名称"},{default:s(()=>[e(a,{modelValue:d.name,"onUpdate:modelValue":t[0]||(t[0]=V=>d.name=V),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),n("div",ue,[e(D,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=V=>m.value=V),onTabClick:r},{default:s(()=>[e(p,{name:"transcoding",label:"转换"},{default:s(()=>[e(le,{"on-finish":h})]),_:1}),e(p,{name:"Config",label:"提取字幕"}),e(p,{name:"Role",label:"提取音频"}),e(p,{name:"waterMark",label:"水印"})]),_:1},8,["modelValue"])])],8,ne)),[[B,c.value]])}}});const ve=U(re,[["__scopeId","data-v-2a42f4ec"]]);export{ve as default};
