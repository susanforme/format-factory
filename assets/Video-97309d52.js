import{_ as V,f as U,a as A,g as P,o as F,i as k,b as R}from"./index-0d860b1a.js";import{j as C,t as h,k as x,x as z,B as u,f as e,m as a,F as M,y as G,z as j,X as H,Y as E,Z as w,_ as D,$ as K,a0 as Q,r as S,c as y,w as X,a1 as Y,Q as Z,a2 as q,a3 as J,u as W,K as ee,L as oe,P as ae,a4 as te}from"./element-plus-8332f862.js";const le={class:"config"},ne=u("h2",null,"转换配置:",-1),se={class:"operate"},ie=C({__name:"Transcoding",props:{onFinish:{type:Function}},setup(d){const m=d,p=["mp4","webm","ogg","avi","mov","flv","wmv","mkv","m4v","3gp","3g2","ts","mts","m2ts","vob","mxf","rm","rmvb","f4v"],l=h({format:"mp4",kbps:1e3});function n(){m.onFinish(l)}return(I,t)=>{const s=Q,v=H,r=E,b=w,g=D,i=K;return x(),z("div",null,[u("div",le,[ne,e(g,{"label-position":"left","label-width":"100px",model:l},{default:a(()=>[e(r,{label:"输出格式"},{default:a(()=>[e(v,{modelValue:l.format,"onUpdate:modelValue":t[0]||(t[0]=o=>l.format=o),filterable:"",placeholder:"请选择"},{default:a(()=>[(x(),z(M,null,G(p,o=>e(s,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"码率"},{default:a(()=>[e(b,{modelValue:l.kbps,"onUpdate:modelValue":t[1]||(t[1]=o=>l.kbps=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),u("div",se,[e(i,{type:"primary",onClick:n},{default:a(()=>[j(" 输出 ")]),_:1})])])}}}),ce=d=>(ee("data-v-bfe4e4b5"),d=d(),oe(),d),de=["element-loading-text"],ue={class:"config"},me=ce(()=>u("h2",null,"通用导出配置:",-1)),_e={class:"operate"},pe=C({__name:"Video",setup(d){const m=h({name:"output"}),p=S("transcoding"),l=S("-1"),n=S({audio:{},video:{code:"",format:""},basic:{VideoCount:"",AudioCount:"",Format:"",Format_Profile:"",CodecID:"",CodecID_Compatible:"",FileSize:"",Duration:"",OverallBitRate_Mode:"",OverallBitRate:"",FrameRate:"",FrameCount:"",StreamSize:"",HeaderSize:"",DataSize:"",FooterSize:"",IsStreamable:"",Encoded_Application:""}}),I=y(()=>({file_n:s.value.name,file_s:U(s.value.size),...n.value.basic})),t=h({value:!1,text:"Loading"}),s=y(()=>A.value[0]);X(s,()=>{s.value&&v()},{immediate:!0});async function v(){t.value=!0,t.text="获取视频信息中...";const i=await P(s.value.raw);console.log("%c [ result ]-68","font-size:13px; background:pink; color:#bf2c9f;",i),i.media.track.forEach(o=>{const c=o["@type"];c==="Video"?n.value.video={...F(o,["FileSize","DataSize"]),"@type":k.global.t("video")}:c==="Audio"?n.value.audio={...F(o,["FileSize","DataSize"]),"@type":k.global.t("audio")}:c==="General"&&(n.value.basic=F(o,["FileSize","DataSize"]))}),t.value=!1}async function r(){console.log(123)}r();function b(){console.log(123)}function g(i){console.log("%c [ config ]-70","font-size:13px; background:pink; color:#bf2c9f;",i)}return(i,o)=>{const c=ae,T=Z,B=w,L=E,$=D,f=te,N=q,O=J;return Y((x(),z("div",{class:"video","element-loading-text":t.text},[e(T,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=_=>l.value=_)},{default:a(()=>[e(c,{title:"基本信息",name:"1"},{default:a(()=>[e(V,{data:W(I)},null,8,["data"])]),_:1}),e(c,{title:"视频流信息",name:"2"},{default:a(()=>[e(V,{data:n.value.video},null,8,["data"])]),_:1}),e(c,{title:"音频流信息",name:"3"},{default:a(()=>[e(V,{data:n.value.audio},null,8,["data"])]),_:1})]),_:1},8,["modelValue"]),u("div",ue,[me,e($,{"label-position":"left","label-width":"100px",model:m},{default:a(()=>[e(L,{label:"输出名称"},{default:a(()=>[e(B,{modelValue:m.name,"onUpdate:modelValue":o[1]||(o[1]=_=>m.name=_),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),u("div",_e,[e(N,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=_=>p.value=_),onTabClick:b},{default:a(()=>[e(f,{name:"transcoding",label:"转换"},{default:a(()=>[e(ie,{"on-finish":g})]),_:1}),e(f,{name:"Config",label:"提取字幕"}),e(f,{name:"Role",label:"提取音频"}),e(f,{name:"waterMark",label:"水印"})]),_:1},8,["modelValue"])])],8,de)),[[O,t.value]])}}});const ve=R(pe,[["__scopeId","data-v-bfe4e4b5"]]);export{ve as default};
