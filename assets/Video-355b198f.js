import{_ as F,f as O,a as U,g as A,o as P,b as R}from"./index-2fb99aa9.js";import{j as w,t as I,k as C,x as S,B as m,f as e,m as a,F as M,y as G,z as j,X as H,Y as z,Z as k,_ as y,$ as K,a0 as Q,r as h,c as E,w as X,a1 as Y,Q as Z,a2 as q,a3 as J,u as x,K as W,L as ee,P as oe,a4 as ae}from"./element-plus-72f05d6b.js";const te={class:"config"},le=m("h2",null,"转换配置:",-1),ne={class:"operate"},se=w({__name:"Transcoding",props:{onFinish:{type:Function}},setup(c){const u=c,r=["mp4","webm","ogg","avi","mov","flv","wmv","mkv","m4v","3gp","3g2","ts","mts","m2ts","vob","mxf","rm","rmvb","f4v"],l=I({format:"mp4",kbps:1e3});function d(){u.onFinish(l)}return(p,t)=>{const n=Q,b=H,f=z,g=k,V=y,s=K;return C(),S("div",null,[m("div",te,[le,e(V,{"label-position":"left","label-width":"100px",model:l},{default:a(()=>[e(f,{label:"输出格式"},{default:a(()=>[e(b,{modelValue:l.format,"onUpdate:modelValue":t[0]||(t[0]=o=>l.format=o),filterable:"",placeholder:"请选择"},{default:a(()=>[(C(),S(M,null,G(r,o=>e(n,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"码率"},{default:a(()=>[e(g,{modelValue:l.kbps,"onUpdate:modelValue":t[1]||(t[1]=o=>l.kbps=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),m("div",ne,[e(s,{type:"primary",onClick:d},{default:a(()=>[j(" 输出 ")]),_:1})])])}}}),ie=c=>(W("data-v-0faab67e"),c=c(),ee(),c),ce=["element-loading-text"],de={class:"config"},me=ie(()=>m("h2",null,"通用导出配置:",-1)),ue={class:"operate"},_e=w({__name:"Video",setup(c){const u=I({name:"output"}),r=h("transcoding"),l=h("-1"),d=h({audio:{},video:{code:"",format:""},basic:{VideoCount:"",AudioCount:"",Format:"",Format_Profile:"",CodecID:"",CodecID_Compatible:"",FileSize:"",Duration:"",OverallBitRate_Mode:"",OverallBitRate:"",FrameRate:"",FrameCount:"",StreamSize:"",HeaderSize:"",DataSize:"",FooterSize:"",IsStreamable:"",Encoded_Application:""}}),p=E(()=>({file_n:n.value.name,file_s:O(n.value.size),...d.value.basic})),t=I({value:!1,text:"Loading"}),n=E(()=>U.value[0]);X(n,()=>{n.value&&b()},{immediate:!0});async function b(){t.value=!0,t.text="获取视频信息中...";const s=await A(n.value.raw);console.log("%c [ result ]-68","font-size:13px; background:pink; color:#bf2c9f;",s),s.media.track.forEach(o=>{const i=o["@type"];i==="Video"?d.value.video={code:o.CodecID,format:o.Format}:i==="Audio"?d.value.audio={code:o.CodecID,format:o.Format}:i==="General"&&(d.value.basic=P(o,["FileSize","DataSize"]))}),t.value=!1}async function f(){console.log(123)}f();function g(){console.log(123)}function V(s){console.log("%c [ config ]-70","font-size:13px; background:pink; color:#bf2c9f;",s)}return(s,o)=>{const i=oe,D=Z,T=k,B=z,L=y,v=ae,$=q,N=J;return Y((C(),S("div",{class:"video","element-loading-text":t.text},[e(D,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=_=>l.value=_)},{default:a(()=>[e(i,{title:"基本信息",name:"1"},{default:a(()=>[e(F,{data:x(p)},null,8,["data"])]),_:1}),e(i,{title:"视频流信息",name:"2"},{default:a(()=>[e(F,{data:x(p)},null,8,["data"])]),_:1}),e(i,{title:"音频流信息",name:"3"},{default:a(()=>[e(F,{data:x(p)},null,8,["data"])]),_:1})]),_:1},8,["modelValue"]),m("div",de,[me,e(L,{"label-position":"left","label-width":"100px",model:u},{default:a(()=>[e(B,{label:"输出名称"},{default:a(()=>[e(T,{modelValue:u.name,"onUpdate:modelValue":o[1]||(o[1]=_=>u.name=_),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),m("div",ue,[e($,{modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=_=>r.value=_),onTabClick:g},{default:a(()=>[e(v,{name:"transcoding",label:"转换"},{default:a(()=>[e(se,{"on-finish":V})]),_:1}),e(v,{name:"Config",label:"提取字幕"}),e(v,{name:"Role",label:"提取音频"}),e(v,{name:"waterMark",label:"水印"})]),_:1},8,["modelValue"])])],8,ce)),[[N,t.value]])}}});const fe=R(_e,[["__scopeId","data-v-0faab67e"]]);export{fe as default};
