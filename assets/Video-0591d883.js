import{r as I,i as N,c,u as _,a as H,b as Y,d as J,e as M,f as Q,p as U,l as W,n as X,k as h,g as B,h as E,j as V,m as b,w as ee,o as T,q as te,v as ne,T as oe,s as le,t as se,x as y,y as ae,z as $,A as P,B as p,C as w,D as j,E as re,F as ie,G as ce,H as ue,I as de,_ as ve}from"./index-797aa87c.js";const fe=["","default","small","large"],S=I(0),Z=2e3,K=Symbol("zIndexContextKey"),O=t=>{const e=t||N(K,void 0),n=c(()=>{const l=_(e);return H(l)?l:Z}),o=c(()=>n.value+S.value);return{initialZIndex:n,currentZIndex:o,nextZIndex:()=>(S.value++,o.value)}};Y({type:String,values:fe,required:!1});const me=Symbol("size"),F=Symbol(),C=I();function G(t,e=void 0){const n=B()?N(F,C):C;return t?c(()=>{var o,s;return(s=(o=n.value)==null?void 0:o[t])!=null?s:e}):n}function ge(t,e){const n=G(),o=J(t,c(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||M})),s=Q(c(()=>{var a;return(a=n.value)==null?void 0:a.locale})),l=O(c(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||Z})),i=c(()=>{var a;return _(e)||((a=n.value)==null?void 0:a.size)||""});return be(c(()=>_(n)||{})),{ns:o,locale:s,zIndex:l,size:i}}const be=(t,e,n=!1)=>{var o;const s=!!B(),l=s?G():void 0,i=(o=e==null?void 0:e.provide)!=null?o:s?U:void 0;if(!i)return;const a=c(()=>{const v=_(t);return l!=null&&l.value?pe(l.value,v):v});return i(F,a),i(W,c(()=>a.value.locale)),i(X,c(()=>a.value.namespace)),i(K,c(()=>a.value.zIndex)),i(me,{size:c(()=>a.value.size||"")}),(n||!C.value)&&(C.value=a.value),a},pe=(t,e)=>{var n;const o=[...new Set([...h(t),...h(e)])],s={};for(const l of o)s[l]=(n=e[l])!=null?n:t[l];return s};function xe(t){let e;const n=I(!1),o=E({...t,originalPosition:"",originalOverflow:"",visible:!1});function s(r){o.text=r}function l(){const r=o.parent,u=m.ns;if(!r.vLoadingAddClassList){let d=r.getAttribute("loading-number");d=Number.parseInt(d)-1,d?r.setAttribute("loading-number",d.toString()):(y(r,u.bm("parent","relative")),r.removeAttribute("loading-number")),y(r,u.bm("parent","hidden"))}i(),g.unmount()}function i(){var r,u;(u=(r=m.$el)==null?void 0:r.parentNode)==null||u.removeChild(m.$el)}function a(){var r;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=window.setTimeout(v,400),o.visible=!1,(r=t.closed)==null||r.call(t))}function v(){if(!n.value)return;const r=o.parent;n.value=!1,r.vLoadingAddClassList=void 0,l()}const f=V({name:"ElLoading",setup(r,{expose:u}){const{ns:d}=ge("loading"),R=O();return u({ns:d,zIndex:R}),()=>{const k=o.spinner||o.svg,q=b("svg",{class:"circular",viewBox:o.svgViewBox?o.svgViewBox:"0 0 50 50",...k?{innerHTML:k}:{}},[b("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),D=o.text?b("p",{class:d.b("text")},[o.text]):void 0;return b(oe,{name:d.b("fade"),onAfterLeave:v},{default:ee(()=>[T(te("div",{style:{backgroundColor:o.background||""},class:[d.b("mask"),o.customClass,o.fullscreen?"is-fullscreen":""]},[b("div",{class:d.b("spinner")},[q,D])]),[[ne,o.visible]])])})}}}),g=le(f),m=g.mount(document.createElement("div"));return{...se(o),setText:s,removeElLoadingChild:i,close:a,handleAfterLeave:v,vm:m,get $el(){return m.$el}}}let x;const _e=function(t={}){if(!ae)return;const e=ye(t);if(e.fullscreen&&x)return x;const n=xe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(x=void 0)}});Ce(e,e.parent,n),z(e,e.parent,n),e.parent.vLoadingAddClassList=()=>z(e,e.parent,n);let o=e.parent.getAttribute("loading-number");return o?o=`${Number.parseInt(o)+1}`:o="1",e.parent.setAttribute("loading-number",o),e.parent.appendChild(n.$el),$(()=>n.visible.value=e.visible),e.fullscreen&&(x=n),n},ye=t=>{var e,n,o,s;let l;return P(t.target)?l=(e=document.querySelector(t.target))!=null?e:document.body:l=t.target||document.body,{parent:l===document.body||t.body?document.body:l,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:l===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(o=t.lock)!=null?o:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,target:l}},Ce=async(t,e,n)=>{const{nextZIndex:o}=n.vm.zIndex,s={};if(t.fullscreen)n.originalPosition.value=p(document.body,"position"),n.originalOverflow.value=p(document.body,"overflow"),s.zIndex=o();else if(t.parent===document.body){n.originalPosition.value=p(document.body,"position"),await $();for(const l of["top","left"]){const i=l==="top"?"scrollTop":"scrollLeft";s[l]=`${t.target.getBoundingClientRect()[l]+document.body[i]+document.documentElement[i]-Number.parseInt(p(document.body,`margin-${l}`),10)}px`}for(const l of["height","width"])s[l]=`${t.target.getBoundingClientRect()[l]}px`}else n.originalPosition.value=p(e,"position");for(const[l,i]of Object.entries(s))n.$el.style[l]=i},z=(t,e,n)=>{const o=n.vm.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?y(e,o.bm("parent","relative")):w(e,o.bm("parent","relative")),t.fullscreen&&t.lock?w(e,o.bm("parent","hidden")):y(e,o.bm("parent","hidden"))},L=Symbol("ElLoading"),A=(t,e)=>{var n,o,s,l;const i=e.instance,a=r=>j(e.value)?e.value[r]:void 0,v=r=>{const u=P(r)&&(i==null?void 0:i[r])||r;return u&&I(u)},f=r=>v(a(r)||t.getAttribute(`element-loading-${ie(r)}`)),g=(n=a("fullscreen"))!=null?n:e.modifiers.fullscreen,m={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:g,target:(o=a("target"))!=null?o:g?void 0:t,body:(s=a("body"))!=null?s:e.modifiers.body,lock:(l=a("lock"))!=null?l:e.modifiers.lock};t[L]={options:m,instance:_e(m)}},Ie=(t,e)=>{for(const n of Object.keys(e))re(e[n])&&(e[n].value=t[n])},Le={mounted(t,e){e.value&&A(t,e)},updated(t,e){const n=t[L];e.oldValue!==e.value&&(e.value&&!e.oldValue?A(t,e):e.value&&e.oldValue?j(e.value)&&Ie(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[L])==null||e.instance.close()}};const ke=["element-loading-text"],he=V({__name:"Video",setup(t){const e=E({value:!1,text:"Loading"});async function n(){e.value=!0,e.text="初始化编解码器中...",await de(),e.value=!1}return n(),(o,s)=>{const l=Le;return T((ce(),ue("div",{class:"video","element-loading-text":e.text},null,8,ke)),[[l,e.value]])}}});const Se=ve(he,[["__scopeId","data-v-a52e19b0"]]);export{Se as default};
